# eddypay-lucky-money
카카오페이 뿌리기 API

## 📋사용기술
 - 프레임워크 : Spring Boot 2.3.1
 - DB : MyBatis 5.7.17

## 🔑접근
### 예외 처리
클라이언트가 접속을 먼저 종료하여 응답 수신을 실패할 경우, 롤백 처리 진행이 필요함을 고려

### 동시성 처리
받기 API를 통해 같은 token에 대해 동시에 요청이 들어올 경우, 분배 금액 처리 중복 방지가 필요함을 고려

## 🎈 구조
1. (Controller) 요청 분배 및 응답 처리
2. (Service) 요청에 대한 프로세스 처리
3. (Mapper) DB 처리

## 🔍현재 구현상황 및 향후 계획

### 1. 뿌리기 API
### 현재 구현 단계 
- 토큰 생성로직을 제외한 모든 기능 구현 완료
### 향후 계획 
- 토큰 생성 로직 개발(난수를 이용한 문자열 생성)
- 테이블 PK 값 수정 처리
```
 현재, 토큰과 X-ROOM-ID, X-USER-ID, 분배금액으로 분배금액정보 테이블의 PK를 설정
 하지만, 분배될 금액이 같을 수도 있기에 해당 PK로는 유일한 행을 식별할 수 없다.
 그렇기에, 분배금액정보 테이블(DIVIDED_LUCKY_MONEY)에 시퀀스를 하나 더 추가하여 PK를 다시 설정할 계획
```

### 2. 받기 API
#### 현재 구현 단계
- 기본적인 기능은 구현 완료하였으나, 조회 처리 중 mybatis의 ResultSetHandler에서 오류 발생
#### 향후 계획
- 조회 처리시, mybatis의 ResultSetHandler 오류 해결
```
 현재, 조회 결과의 컬럼들로 구성된 ResultType의 생성자가 존재하지 않아서 오류 발생
 이 오류는 생성자를 추가하여 해결할 수 있지만, 코드의 간결성과 논리성을 해친다.
 그렇기에, 비즈니스 로직에 따라 조회결과를 담는 Value Object를 따로 만들어서 처리할 계획
```

### 3. 조회 API

#### 현재 구현 단계
- 구현 전 단계

#### 향후 계획
- 정해진 요구사항에 따라 구현 예정
```
 조회할 대상의 PK값이 필요한데, 위에서 언급한 내용(뿌리기API)으로 인해 미구현
 PK문제 해결 후 요구사항에 따라 구현
```
